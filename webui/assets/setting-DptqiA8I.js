import{z as Ae,a7 as ve,M as at,a4 as Fe,Y as Ee,J as T,H as x,I as S,a0 as ne,aa as A,a5 as Se,aj as H,ap as re,C as Q,D as W,c as I,o as $,a as g,P as r,n as N,h as C,al as ce,a_ as de,b0 as ge,ao as ae,b1 as st,bN as lt,aW as Pe,b2 as nt,bO as te,bm as Te,F as rt,r as it,a8 as ut,bE as ct,b3 as dt,b4 as ht,b5 as ft,bP as pt,bL as mt,bQ as vt,as as gt,N as D,w as k,av as _t,O as he,e as f,Q as Ve,b6 as bt,V as Le,ak as wt,i as Ct,f as K,j as De,E as X,d as V,t as L,bv as yt,aw as kt,ad as oe,bb as Ie,aq as $t,X as Et,bR as fe,ax as pe,_ as G,l as se,m as z,u as ie,bS as St,bT as Be,az as Me}from"./index-GFPxSYC1.js";import{E as Oe}from"./index-DdxZFNzS.js";import{f as Pt,a as Tt,E as Vt}from"./select-BcqHBGx_.js";import{E as Lt,a as It}from"./form-item-45tlzrE8.js";import"./validator-DtQ53QEi.js";const Bt=Ae({color:{type:ve(Object),required:!0},vertical:Boolean});let me=!1;function Y(e,o){if(!at)return;const s=function(a){var l;(l=o.drag)==null||l.call(o,a)},t=function(a){var l;document.removeEventListener("mousemove",s),document.removeEventListener("mouseup",t),document.removeEventListener("touchmove",s),document.removeEventListener("touchend",t),document.onselectstart=null,document.ondragstart=null,me=!1,(l=o.end)==null||l.call(o,a)},n=function(a){var l;me||(a.preventDefault(),document.onselectstart=()=>!1,document.ondragstart=()=>!1,document.addEventListener("mousemove",s),document.addEventListener("mouseup",t),document.addEventListener("touchmove",s),document.addEventListener("touchend",t),me=!0,(l=o.start)==null||l.call(o,a))};e.addEventListener("mousedown",n),e.addEventListener("touchstart",n,{passive:!1})}const _e=e=>{let o,s;return e.type==="touchend"?(s=e.changedTouches[0].clientY,o=e.changedTouches[0].clientX):e.type.startsWith("touch")?(s=e.touches[0].clientY,o=e.touches[0].clientX):(s=e.clientY,o=e.clientX),{clientX:o,clientY:s}},Mt=e=>{const o=re(),{t:s}=Fe(),t=Ee(),n=Ee(),a=T(()=>e.color.get("alpha")),l=T(()=>s("el.colorpicker.alphaLabel"));function u(p){var m;p.target!==t.value&&c(p),(m=t.value)==null||m.focus()}function c(p){if(!n.value||!t.value)return;const d=o.vnode.el.getBoundingClientRect(),{clientX:v,clientY:y}=_e(p);if(e.vertical){let E=y-d.top;E=Math.max(t.value.offsetHeight/2,E),E=Math.min(E,d.height-t.value.offsetHeight/2),e.color.set("alpha",Math.round((E-t.value.offsetHeight/2)/(d.height-t.value.offsetHeight)*100))}else{let E=v-d.left;E=Math.max(t.value.offsetWidth/2,E),E=Math.min(E,d.width-t.value.offsetWidth/2),e.color.set("alpha",Math.round((E-t.value.offsetWidth/2)/(d.width-t.value.offsetWidth)*100))}}function h(p){const{code:m,shiftKey:d}=p,v=d?10:1;switch(m){case H.left:case H.down:p.preventDefault(),p.stopPropagation(),b(-v);break;case H.right:case H.up:p.preventDefault(),p.stopPropagation(),b(v);break}}function b(p){let m=a.value+p;m=m<0?0:m>100?100:m,e.color.set("alpha",m)}return{thumb:t,bar:n,alpha:a,alphaLabel:l,handleDrag:c,handleClick:u,handleKeydown:h}},At=(e,{bar:o,thumb:s,handleDrag:t})=>{const n=re(),a=x("color-alpha-slider"),l=S(0),u=S(0),c=S();function h(){if(!s.value||e.vertical)return 0;const P=n.vnode.el,_=e.color.get("alpha");return P?Math.round(_*(P.offsetWidth-s.value.offsetWidth/2)/100):0}function b(){if(!s.value)return 0;const P=n.vnode.el;if(!e.vertical)return 0;const _=e.color.get("alpha");return P?Math.round(_*(P.offsetHeight-s.value.offsetHeight/2)/100):0}function p(){if(e.color&&e.color.value){const{r:P,g:_,b:J}=e.color.toRgb();return`linear-gradient(to right, rgba(${P}, ${_}, ${J}, 0) 0%, rgba(${P}, ${_}, ${J}, 1) 100%)`}return""}function m(){l.value=h(),u.value=b(),c.value=p()}ne(()=>{if(!o.value||!s.value)return;const P={drag:_=>{t(_)},end:_=>{t(_)}};Y(o.value,P),Y(s.value,P),m()}),A(()=>e.color.get("alpha"),()=>m()),A(()=>e.color.value,()=>m());const d=T(()=>[a.b(),a.is("vertical",e.vertical)]),v=T(()=>a.e("bar")),y=T(()=>a.e("thumb")),E=T(()=>({background:c.value})),M=T(()=>({left:Se(l.value),top:Se(u.value)}));return{rootKls:d,barKls:v,barStyle:E,thumbKls:y,thumbStyle:M,update:m}},Ft="ElColorAlphaSlider",Dt=W({name:Ft}),Ot=W({...Dt,props:Bt,setup(e,{expose:o}){const s=e,{alpha:t,alphaLabel:n,bar:a,thumb:l,handleDrag:u,handleClick:c,handleKeydown:h}=Mt(s),{rootKls:b,barKls:p,barStyle:m,thumbKls:d,thumbStyle:v,update:y}=At(s,{bar:a,thumb:l,handleDrag:u});return o({update:y,bar:a,thumb:l}),(E,M)=>($(),I("div",{class:C(r(b))},[g("div",{ref_key:"bar",ref:a,class:C(r(p)),style:N(r(m)),onClick:r(c)},null,14,["onClick"]),g("div",{ref_key:"thumb",ref:l,class:C(r(d)),style:N(r(v)),"aria-label":r(n),"aria-valuenow":r(t),"aria-orientation":E.vertical?"vertical":"horizontal","aria-valuemin":"0","aria-valuemax":"100",role:"slider",tabindex:"0",onKeydown:r(h)},null,46,["aria-label","aria-valuenow","aria-orientation","onKeydown"])],2))}});var Rt=Q(Ot,[["__file","alpha-slider.vue"]]);const Kt=W({name:"ElColorHueSlider",props:{color:{type:Object,required:!0},vertical:Boolean},setup(e){const o=x("color-hue-slider"),s=re(),t=S(),n=S(),a=S(0),l=S(0),u=T(()=>e.color.get("hue"));A(()=>u.value,()=>{m()});function c(d){d.target!==t.value&&h(d)}function h(d){if(!n.value||!t.value)return;const y=s.vnode.el.getBoundingClientRect(),{clientX:E,clientY:M}=_e(d);let P;if(e.vertical){let _=M-y.top;_=Math.min(_,y.height-t.value.offsetHeight/2),_=Math.max(t.value.offsetHeight/2,_),P=Math.round((_-t.value.offsetHeight/2)/(y.height-t.value.offsetHeight)*360)}else{let _=E-y.left;_=Math.min(_,y.width-t.value.offsetWidth/2),_=Math.max(t.value.offsetWidth/2,_),P=Math.round((_-t.value.offsetWidth/2)/(y.width-t.value.offsetWidth)*360)}e.color.set("hue",P)}function b(){if(!t.value)return 0;const d=s.vnode.el;if(e.vertical)return 0;const v=e.color.get("hue");return d?Math.round(v*(d.offsetWidth-t.value.offsetWidth/2)/360):0}function p(){if(!t.value)return 0;const d=s.vnode.el;if(!e.vertical)return 0;const v=e.color.get("hue");return d?Math.round(v*(d.offsetHeight-t.value.offsetHeight/2)/360):0}function m(){a.value=b(),l.value=p()}return ne(()=>{if(!n.value||!t.value)return;const d={drag:v=>{h(v)},end:v=>{h(v)}};Y(n.value,d),Y(t.value,d),m()}),{bar:n,thumb:t,thumbLeft:a,thumbTop:l,hueValue:u,handleClick:c,update:m,ns:o}}});function Ht(e,o,s,t,n,a){return $(),I("div",{class:C([e.ns.b(),e.ns.is("vertical",e.vertical)])},[g("div",{ref:"bar",class:C(e.ns.e("bar")),onClick:e.handleClick},null,10,["onClick"]),g("div",{ref:"thumb",class:C(e.ns.e("thumb")),style:N({left:e.thumbLeft+"px",top:e.thumbTop+"px"})},null,6)],2)}var Nt=Q(Kt,[["render",Ht],["__file","hue-slider.vue"]]);const zt=Ae({persistent:{type:Boolean,default:!0},modelValue:{type:ve(String),default:void 0},id:String,showAlpha:Boolean,colorFormat:String,disabled:Boolean,size:nt,popperClass:{type:String,default:""},tabindex:{type:[String,Number],default:0},teleported:Pe.teleported,appendTo:Pe.appendTo,predefine:{type:ve(Array)},validateEvent:{type:Boolean,default:!0},...lt,...st(["ariaLabel"])}),Wt={[ae]:e=>ce(e)||de(e),[ge]:e=>ce(e)||de(e),activeChange:e=>ce(e)||de(e),focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent},Re=Symbol("colorPickerContextKey");class le{constructor(o={}){this._hue=0,this._saturation=100,this._value=100,this._alpha=100,this._tiny=new te,this._isValid=!1,this.enableAlpha=!1,this.format="",this.value="";for(const s in o)Te(o,s)&&(this[s]=o[s]);o.value?this.fromString(o.value):this.doOnChange()}set(o,s){if(arguments.length===1&&typeof o=="object"){for(const t in o)Te(o,t)&&this.set(t,o[t]);return}this[`_${o}`]=s,this._isValid=!0,this.doOnChange()}get(o){return["hue","saturation","value","alpha"].includes(o)?Math.round(this[`_${o}`]):this[`_${o}`]}toRgb(){return this._isValid?this._tiny.toRgb():{r:255,g:255,b:255,a:0}}fromString(o){const s=new te(o);if(this._isValid=s.isValid,s.isValid){const{h:t,s:n,v:a,a:l}=s.toHsv();this._hue=t,this._saturation=n*100,this._value=a*100,this._alpha=l*100}else this._hue=0,this._saturation=100,this._value=100,this._alpha=100;this.doOnChange()}compare(o){const s=new te({h:o._hue,s:o._saturation/100,v:o._value/100,a:o._alpha/100});return this._tiny.equals(s)}doOnChange(){const{_hue:o,_saturation:s,_value:t,_alpha:n,format:a,enableAlpha:l}=this;let u=a||(l?"rgb":"hex");a==="hex"&&l&&(u="hex8"),this._tiny=new te({h:o,s:s/100,v:t/100,a:n/100}),this.value=this._isValid?this._tiny.toString(u):""}}const qt=W({props:{colors:{type:Array,required:!0},color:{type:Object,required:!0},enableAlpha:{type:Boolean,required:!0}},setup(e){const o=x("color-predefine"),{currentColor:s}=ut(Re),t=S(a(e.colors,e.color));A(()=>s.value,l=>{const u=new le({value:l});t.value.forEach(c=>{c.selected=u.compare(c)})}),ct(()=>{t.value=a(e.colors,e.color)});function n(l){e.color.fromString(e.colors[l])}function a(l,u){return l.map(c=>{const h=new le({value:c});return h.selected=h.compare(u),h})}return{rgbaColors:t,handleSelect:n,ns:o}}});function Ut(e,o,s,t,n,a){return $(),I("div",{class:C(e.ns.b())},[g("div",{class:C(e.ns.e("colors"))},[($(!0),I(rt,null,it(e.rgbaColors,(l,u)=>($(),I("div",{key:e.colors[u],class:C([e.ns.e("color-selector"),e.ns.is("alpha",l.get("alpha")<100),{selected:l.selected}]),onClick:c=>e.handleSelect(u)},[g("div",{style:N({backgroundColor:l.value})},null,4)],10,["onClick"]))),128))],2)],2)}var jt=Q(qt,[["render",Ut],["__file","predefine.vue"]]);const Xt=W({name:"ElSlPanel",props:{color:{type:Object,required:!0}},setup(e){const o=x("color-svpanel"),s=re(),t=S(0),n=S(0),a=S("hsl(0, 100%, 50%)"),l=T(()=>{const h=e.color.get("hue"),b=e.color.get("value");return{hue:h,value:b}});function u(){const h=e.color.get("saturation"),b=e.color.get("value"),p=s.vnode.el,{clientWidth:m,clientHeight:d}=p;n.value=h*m/100,t.value=(100-b)*d/100,a.value=`hsl(${e.color.get("hue")}, 100%, 50%)`}function c(h){const p=s.vnode.el.getBoundingClientRect(),{clientX:m,clientY:d}=_e(h);let v=m-p.left,y=d-p.top;v=Math.max(0,v),v=Math.min(v,p.width),y=Math.max(0,y),y=Math.min(y,p.height),n.value=v,t.value=y,e.color.set({saturation:v/p.width*100,value:100-y/p.height*100})}return A(()=>l.value,()=>{u()}),ne(()=>{Y(s.vnode.el,{drag:h=>{c(h)},end:h=>{c(h)}}),u()}),{cursorTop:t,cursorLeft:n,background:a,colorValue:l,handleDrag:c,update:u,ns:o}}});function Yt(e,o,s,t,n,a){return $(),I("div",{class:C(e.ns.b()),style:N({backgroundColor:e.background})},[g("div",{class:C(e.ns.e("white"))},null,2),g("div",{class:C(e.ns.e("black"))},null,2),g("div",{class:C(e.ns.e("cursor")),style:N({top:e.cursorTop+"px",left:e.cursorLeft+"px"})},[g("div")],6)],6)}var xt=Q(Xt,[["render",Yt],["__file","sv-panel.vue"]]);const Qt=W({name:"ElColorPicker"}),Gt=W({...Qt,props:zt,emits:Wt,setup(e,{expose:o,emit:s}){const t=e,{t:n}=Fe(),a=x("color"),{formItem:l}=dt(),u=ht(),c=ft(),{valueOnClear:h,isEmptyValue:b}=pt(t,null),{inputId:p,isLabeledByFormItem:m}=mt(t,{formItemContext:l}),d=S(),v=S(),y=S(),E=S(),M=S(),P=S(),{isFocused:_,handleFocus:J,handleBlur:We}=vt(M,{disabled:c,beforeBlur(i){var B;return(B=E.value)==null?void 0:B.isFocusInsideContent(i)},afterBlur(){j(!1),U()}});let ue=!0;const w=gt(new le({enableAlpha:t.showAlpha,format:t.colorFormat||"",value:t.modelValue})),q=S(!1),O=S(!1),F=S(""),qe=T(()=>!t.modelValue&&!O.value?"transparent":Ye(w,t.showAlpha)),Z=T(()=>!t.modelValue&&!O.value?"":w.value),Ue=T(()=>m.value?void 0:t.ariaLabel||n("el.colorpicker.defaultLabel")),je=T(()=>m.value?l?.labelId:void 0),Xe=T(()=>[a.b("picker"),a.is("disabled",c.value),a.bm("picker",u.value),a.is("focused",_.value)]);function Ye(i,B){const{r:R,g:ke,b:$e,a:ot}=i.toRgb();return B?`rgba(${R}, ${ke}, ${$e}, ${ot})`:`rgb(${R}, ${ke}, ${$e})`}function j(i){q.value=i}const ee=Pt(j,100,{leading:!0});function be(){c.value||j(!0)}function we(){ee(!1),U()}function U(){oe(()=>{t.modelValue?w.fromString(t.modelValue):(w.value="",!Z.value&&F.value&&(F.value=""),oe(()=>{O.value=!1}))})}function xe(){c.value||(q.value&&U(),ee(!q.value))}function Qe(){w.fromString(F.value),w.value!==F.value&&(F.value=w.value)}function Ge(){const i=b(w.value)?h.value:w.value;s(ae,i),s(ge,i),t.validateEvent&&l?.validate("change").catch(B=>Ie()),ee(!1),oe(()=>{const B=new le({enableAlpha:t.showAlpha,format:t.colorFormat||"",value:t.modelValue});w.compare(B)||U()})}function Je(){ee(!1),s(ae,h.value),s(ge,h.value),t.modelValue!==h.value&&t.validateEvent&&l?.validate("change").catch(i=>Ie()),U()}function Ze(){q.value&&(we(),_.value&&ye())}function Ce(i){i.preventDefault(),i.stopPropagation(),j(!1),U()}function et(i){switch(i.code){case H.enter:case H.numpadEnter:case H.space:i.preventDefault(),i.stopPropagation(),be(),P.value.focus();break;case H.esc:Ce(i);break}}function ye(){M.value.focus()}function tt(){M.value.blur()}return ne(()=>{t.modelValue&&(F.value=Z.value)}),A(()=>t.modelValue,i=>{i?i&&i!==w.value&&(ue=!1,w.fromString(i)):O.value=!1}),A(()=>[t.colorFormat,t.showAlpha],()=>{w.enableAlpha=t.showAlpha,w.format=t.colorFormat||w.format,w.doOnChange(),s(ae,w.value)}),A(()=>Z.value,i=>{F.value=i,ue&&s("activeChange",i),ue=!0}),A(()=>w.value,()=>{!t.modelValue&&!O.value&&(O.value=!0)}),A(()=>q.value,()=>{oe(()=>{var i,B,R;(i=d.value)==null||i.update(),(B=v.value)==null||B.update(),(R=y.value)==null||R.update()})}),$t(Re,{currentColor:Z}),o({color:w,show:be,hide:we,focus:ye,blur:tt}),(i,B)=>($(),D(r(kt),{ref_key:"popper",ref:E,visible:q.value,"show-arrow":!1,"fallback-placements":["bottom","top","right","left"],offset:0,"gpu-acceleration":!1,"popper-class":[r(a).be("picker","panel"),r(a).b("dropdown"),i.popperClass],"stop-popper-mouse-event":!1,effect:"light",trigger:"click",teleported:i.teleported,transition:`${r(a).namespace.value}-zoom-in-top`,persistent:i.persistent,"append-to":i.appendTo,onHide:R=>j(!1)},{content:k(()=>[he(($(),I("div",{onKeydown:Ct(Ce,["esc"])},[g("div",{class:C(r(a).be("dropdown","main-wrapper"))},[f(Nt,{ref_key:"hue",ref:d,class:"hue-slider",color:r(w),vertical:""},null,8,["color"]),f(xt,{ref_key:"sv",ref:v,color:r(w)},null,8,["color"])],2),i.showAlpha?($(),D(Rt,{key:0,ref_key:"alpha",ref:y,color:r(w)},null,8,["color"])):K("v-if",!0),i.predefine?($(),D(jt,{key:1,ref:"predefine","enable-alpha":i.showAlpha,color:r(w),colors:i.predefine},null,8,["enable-alpha","color","colors"])):K("v-if",!0),g("div",{class:C(r(a).be("dropdown","btns"))},[g("span",{class:C(r(a).be("dropdown","value"))},[f(r(De),{ref_key:"inputRef",ref:P,modelValue:F.value,"onUpdate:modelValue":R=>F.value=R,"validate-event":!1,size:"small",onChange:Qe},null,8,["modelValue","onUpdate:modelValue"])],2),f(r(X),{class:C(r(a).be("dropdown","link-btn")),text:"",size:"small",onClick:Je},{default:k(()=>[V(L(r(n)("el.colorpicker.clear")),1)]),_:1},8,["class"]),f(r(X),{plain:"",size:"small",class:C(r(a).be("dropdown","btn")),onClick:Ge},{default:k(()=>[V(L(r(n)("el.colorpicker.confirm")),1)]),_:1},8,["class"])],2)],40,["onKeydown"])),[[r(yt),Ze,M.value]])]),default:k(()=>[g("div",_t({id:r(p),ref_key:"triggerRef",ref:M},i.$attrs,{class:r(Xe),role:"button","aria-label":r(Ue),"aria-labelledby":r(je),"aria-description":r(n)("el.colorpicker.description",{color:i.modelValue||""}),"aria-disabled":r(c),tabindex:r(c)?void 0:i.tabindex,onKeydown:et,onFocus:r(J),onBlur:r(We)}),[g("div",{class:C(r(a).be("picker","trigger")),onClick:xe},[g("span",{class:C([r(a).be("picker","color"),r(a).is("alpha",i.showAlpha)])},[g("span",{class:C(r(a).be("picker","color-inner")),style:N({backgroundColor:r(qe)})},[he(f(r(Ve),{class:C([r(a).be("picker","icon"),r(a).is("icon-arrow-down")])},{default:k(()=>[f(r(bt))]),_:1},8,["class"]),[[Le,i.modelValue||O.value]]),he(f(r(Ve),{class:C([r(a).be("picker","empty"),r(a).is("icon-close")])},{default:k(()=>[f(r(wt))]),_:1},8,["class"]),[[Le,!i.modelValue&&!O.value]])],6)],2)],2)],16,["id","aria-label","aria-labelledby","aria-description","aria-disabled","tabindex","onFocus","onBlur"])]),_:1},8,["visible","popper-class","teleported","transition","persistent","append-to","onHide"]))}});var Jt=Q(Gt,[["__file","color-picker.vue"]]);const Zt=Et(Jt),eo={install(e){fe._context=e._context,pe._context=e._context,e.directive("loading",pe),e.config.globalProperties.$loading=fe},directive:pe,service:fe},to={name:"restartBotButton",data(){const{t:e}=ie();return{t:e,pollingTimeout:6e4,pollingInterval:2e3,hasShownTimeoutError:!1}},methods:{async handleRestart(){try{await Oe.confirm(this.t("confirm.message"),this.t("confirm.warning"),{confirmButtonText:this.t("button.confirm"),cancelButtonText:this.t("button.cancel"),type:"warning"}),await this.restartBot()}catch{return}},async restartBot(){try{if((await se.post("/api/restart",{})).status===200){eo.service({fullscreen:!0,text:this.t("setting.restart_bot.loading.text")});const o=Date.now(),s=async()=>{try{if((await se.get("/api")).status===200)window.location.href="/";else throw new Error("Not ready")}catch{Date.now()-o>=this.pollingTimeout&&!this.hasShownTimeoutError&&(this.hasShownTimeoutError=!0,z({message:this.t("setting.restart_bot.message.failed"),type:"error",duration:0})),setTimeout(s,this.pollingInterval)}};this.hasShownTimeoutError=!1,setTimeout(s,this.pollingInterval)}}catch(e){z.error(this.t("message.error.fetch")+e.message)}}}};function oo(e,o,s,t,n,a){const l=X;return $(),I("div",null,[g("h3",null,[o[0]||(o[0]=g("i",{class:"mdi mdi-restart"},null,-1)),V(" "+L(e.$t("setting.restart_bot.title")),1)]),f(l,{type:"danger",onClick:a.handleRestart},{default:k(()=>[V(L(e.$t("setting.restart_bot.button.restart")),1)]),_:1},8,["onClick"])])}const Ke=G(to,[["render",oo]]),ao={name:"ThemeSelector",data(){const{t:e}=ie();return{presets:{akari:"#edaab3",teahouse:"#0091ff"},customColor:"",showColorPicker:localStorage.getItem("isCustomTheme")==="true",t:e}},methods:{applyPreset(e){const o=this.presets[e];localStorage.setItem("isCustomTheme","false"),localStorage.setItem("themeColor",o),this.showColorPicker=!1,window.dispatchEvent(new Event("theme-change"))},applyCustomColor(e){e?(localStorage.setItem("isCustomTheme","true"),localStorage.setItem("themeColor",e)):(localStorage.removeItem("isCustomTheme","false"),localStorage.removeItem("themeColor","#edaab3")),window.dispatchEvent(new Event("theme-change"))},onCustomButtonClick(){this.applyCustomColor(this.customColor),this.showColorPicker=!0},customButtonStyle(){if(localStorage.getItem("isCustomTheme")==="true"){const o=localStorage.getItem("themeColor");this.customColor=o}return this.customColor?{backgroundColor:this.customColor,borderColor:this.customColor,color:"white"}:{}}}},so={class:"preset-buttons"},lo={class:"custom-theme"};function no(e,o,s,t,n,a){const l=X,u=Zt;return $(),I("div",null,[g("h3",null,[o[3]||(o[3]=g("i",{class:"mdi mdi-palette"},null,-1)),V(" "+L(e.$t("setting.theme_setting.title")),1)]),g("div",so,[f(l,{onClick:o[0]||(o[0]=c=>a.applyPreset("akari")),class:"theme-button akari"},{default:k(()=>[V(L(e.$t("setting.theme_setting.button.pink")),1)]),_:1}),f(l,{onClick:o[1]||(o[1]=c=>a.applyPreset("teahouse")),class:"theme-button teahouse"},{default:k(()=>[V(L(e.$t("setting.theme_setting.button.blue")),1)]),_:1}),g("div",lo,[f(l,{onClick:a.onCustomButtonClick,class:"theme-button custom",style:N(a.customButtonStyle())},{default:k(()=>[V(L(e.$t("setting.theme_setting.button.custom")),1)]),_:1},8,["onClick","style"]),n.showColorPicker?($(),D(u,{key:0,modelValue:n.customColor,"onUpdate:modelValue":o[2]||(o[2]=c=>n.customColor=c),onChange:a.applyCustomColor,clearable:!0},null,8,["modelValue","onChange"])):K("",!0)])])])}const He=G(ao,[["render",no],["__scopeId","data-v-9d617304"]]),ro={name:"LanguageSelector",data(){const{t:e}=ie();return{currentLang:localStorage.getItem("language")||"zh_cn",t:e}},inject:["elementLocale"],methods:{changeLanguage(e){this.currentLang=e,this.$i18n.locale=e,localStorage.setItem("language",e),this.elementLocale.lang=St[e]}}};function io(e,o,s,t,n,a){const l=Tt,u=Vt;return $(),I("div",null,[g("h3",null,[o[1]||(o[1]=g("i",{class:"mdi mdi-translate"},null,-1)),V(" "+L(e.$t("setting.select_language.title")),1)]),f(u,{modelValue:n.currentLang,"onUpdate:modelValue":o[0]||(o[0]=c=>n.currentLang=c),onChange:a.changeLanguage,class:"lang-select",style:{width:"100px","margin-right":"10px"}},{default:k(()=>[f(l,{label:"简体中文",value:"zh_cn"}),f(l,{label:"繁體中文",value:"zh_tw"}),f(l,{label:"English",value:"en_us"}),f(l,{label:"日本語",value:"ja_jp"})]),_:1},8,["modelValue","onChange"])])}const Ne=G(ro,[["render",io],["__scopeId","data-v-4187ee23"]]),uo={data(){const{t:e}=ie();return{form:{old_password:"",new_password:"",confirm_password:""},noPassword:!1,rules:{old_password:[{required:!0,message:this.$t("setting.change_password.validate.old_password"),trigger:"blur"}],new_password:[{required:!0,message:this.$t("setting.change_password.validate.new_password"),trigger:"blur"}],confirm_password:[{required:!0,message:this.$t("setting.change_password.validate.confirm_password"),trigger:"blur"},{validator:(o,s,t)=>{s!==this.form.new_password?t(new Error(this.$t("setting.change_password.validate.inconsistent"))):t()},trigger:"blur"}]},t:e}},mounted(){this.noPassword=localStorage.getItem("noPassword")==="true"||Me},methods:{async handleUpdatePassword(){try{try{await this.$refs.formRef.validate()}catch{return}const e={new_password:this.form.new_password};this.noPassword||(e.password=this.form.old_password),(await se.post("/api/change-password",e)).status===200&&(Be.remove("XSRF-TOKEN"),location.reload())}catch(e){e.response?.status===401?z.error(this.$t("setting.change_password.message.failed")):e.response?.status===403&&Me||z.error(this.$t("message.error.fetch")+e.message)}},async handleClearPassword(){try{await this.$refs.formRef.validateField("old_password"),Oe.confirm(this.$t("setting.change_password.confirm.message"),this.$t("confirm.warning"),{confirmButtonText:this.$t("button.confirm"),cancelButtonText:this.$t("button.cancel"),type:"warning"}).then(async()=>{await this.confirmClearPassword()}).catch(()=>{})}catch{return}},async confirmClearPassword(){try{const e={password:this.form.old_password};(await se.post("/api/clear-password",e)).status===200&&(z.success(this.$t("setting.change_password.message.success.clear")),localStorage.removeItem("noPasswordPromptDisabled"),Be.remove("XSRF-TOKEN"),location.reload())}catch(e){e.response?.status===401?z.error(this.$t("setting.change_password.message.failed")):z.error(this.$t("message.error.fetch")+e.message)}}}},co={class:"password-buttons"};function ho(e,o,s,t,n,a){const l=De,u=Lt,c=X,h=It;return $(),I("div",null,[g("h3",null,[o[4]||(o[4]=g("i",{class:"mdi mdi-lock"},null,-1)),V(" "+L(e.$t("setting.change_password.title")),1)]),f(h,{model:n.form,rules:n.rules,ref:"formRef","label-width":"auto"},{default:k(()=>[n.noPassword?K("",!0):($(),D(u,{key:0,label:e.$t("setting.change_password.input.old_password"),prop:"old_password"},{default:k(()=>[f(l,{modelValue:n.form.old_password,"onUpdate:modelValue":o[0]||(o[0]=b=>n.form.old_password=b),type:"password"},null,8,["modelValue"])]),_:1},8,["label"])),n.noPassword?K("",!0):($(),D(u,{key:1,label:e.$t("setting.change_password.input.new_password"),prop:"new_password"},{default:k(()=>[f(l,{modelValue:n.form.new_password,"onUpdate:modelValue":o[1]||(o[1]=b=>n.form.new_password=b),type:"password"},null,8,["modelValue"])]),_:1},8,["label"])),n.noPassword?($(),D(u,{key:2,label:e.$t("setting.change_password.input.set_password"),prop:"new_password"},{default:k(()=>[f(l,{modelValue:n.form.new_password,"onUpdate:modelValue":o[2]||(o[2]=b=>n.form.new_password=b),type:"password"},null,8,["modelValue"])]),_:1},8,["label"])):K("",!0),f(u,{label:e.$t("setting.change_password.input.confirm_password"),prop:"confirm_password"},{default:k(()=>[f(l,{modelValue:n.form.confirm_password,"onUpdate:modelValue":o[3]||(o[3]=b=>n.form.confirm_password=b),type:"password"},null,8,["modelValue"])]),_:1},8,["label"]),n.noPassword?($(),D(u,{key:3},{default:k(()=>[f(c,{type:"primary",onClick:a.handleUpdatePassword},{default:k(()=>[V(L(e.$t("setting.change_password.button.set_password")),1)]),_:1},8,["onClick"])]),_:1})):K("",!0),n.noPassword?K("",!0):($(),D(u,{key:4},{default:k(()=>[g("div",co,[f(c,{type:"primary",onClick:a.handleUpdatePassword},{default:k(()=>[V(L(e.$t("setting.change_password.button.update_password")),1)]),_:1},8,["onClick"]),f(c,{type:"danger",onClick:a.handleClearPassword},{default:k(()=>[V(L(e.$t("setting.change_password.button.clear_password")),1)]),_:1},8,["onClick"])])]),_:1}))]),_:1},8,["model","rules"])])}const ze=G(uo,[["render",ho],["__scopeId","data-v-83a5c56b"]]),fo={components:{ChangePassword:ze,SelectLanguage:Ne,RestartBot:Ke,ThemeSetting:He}};function po(e,o,s,t,n,a){const l=ze,u=Ne,c=He,h=Ke;return $(),I("div",null,[f(l),f(u),f(c),f(h)])}const wo=G(fo,[["render",po]]);export{wo as default};
